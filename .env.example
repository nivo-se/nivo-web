# ============================================================================
# Nivo Environment Variables
# ============================================================================
# Copy this file to .env and fill in your actual values
# cp .env.example .env

# ----------------------------------------------------------------------------
# App Environment
# ----------------------------------------------------------------------------
# local = dev with optional auth; prod = require JWT for /api routes
APP_ENV=local
# When true (typically in prod), backend requires Authorization: Bearer <token>
REQUIRE_AUTH=false
# When true, only subs in allowed_users with enabled=true can access (after JWT)
REQUIRE_ALLOWLIST=false

# ----------------------------------------------------------------------------
# Database Configuration
# ----------------------------------------------------------------------------
# Options: postgres (local Docker Postgres), supabase
# NOTE: local (SQLite) is no longer supported by backend runtime.
DATABASE_SOURCE=postgres
LOCAL_DB_PATH=data/nivo_optimized.db

# Local Postgres (when DATABASE_SOURCE=postgres)
# This Mac (local dev): use docker-compose.postgres.yml → POSTGRES_HOST=localhost, POSTGRES_PORT=5433
# Mac mini (same machine): docker-compose.yml runs Postgres + API; API uses host=postgres, port=5432 (set in compose)
POSTGRES_HOST=localhost
POSTGRES_PORT=5433
POSTGRES_DB=nivo
POSTGRES_USER=nivo
POSTGRES_PASSWORD=nivo

# ----------------------------------------------------------------------------
# Auth0 (only auth provider). Same audience/issuer as Express express-oauth2-jwt-bearer.
# ----------------------------------------------------------------------------
# AUTH0_DOMAIN=dev-fkrjopczcor0bjzt.us.auth0.com
# AUTH0_AUDIENCE=https://api.nivogroup.se

# ----------------------------------------------------------------------------
# Supabase (optional: data/backend features only, not used for auth)
# ----------------------------------------------------------------------------
# SUPABASE_URL=https://your-project.supabase.co
# SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# ----------------------------------------------------------------------------
# OpenAI / LLM Configuration
# ----------------------------------------------------------------------------
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-4o-mini

# LLM Provider (for LMStudio transplant): set LLM_BASE_URL to use local model
# LLM_BASE_URL=http://localhost:1234/v1
# LLM_API_KEY=lm-studio
# LLM_MODEL=your-model-name
# LLM_PROVIDER=openai_compat

# ----------------------------------------------------------------------------
# Redis Configuration (for background job queues)
# ----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379/0

# ----------------------------------------------------------------------------
# Web Scraping & Enrichment
# ----------------------------------------------------------------------------
# SerpAPI for website lookup (optional but recommended)
SERPAPI_KEY=your-serpapi-key-here

# Puppeteer Service (optional - for deep scraping of dynamic sites)
# Option 1: Use Browserless.io (recommended for production)
# PUPPETEER_SERVICE_URL=https://chrome.browserless.io/scrape
# PUPPETEER_SERVICE_TOKEN=your-browserless-token

# Option 2: Use your own Railway-deployed Puppeteer worker
# PUPPETEER_SERVICE_URL=https://your-puppeteer-worker.railway.app/scrape
# PUPPETEER_SERVICE_TOKEN=your-api-token-if-needed

# ----------------------------------------------------------------------------
# CRM Export
# ----------------------------------------------------------------------------
COPPER_API_TOKEN=your-copper-api-token-here

# ----------------------------------------------------------------------------
# CORS Configuration (backend: allow these origins to call the API)
# ----------------------------------------------------------------------------
# Local dev + production frontend. Add every origin that will call the API.
CORS_ORIGINS=http://localhost:5173,http://localhost:8080,https://app.nivogroup.se
# If using Vercel: add your app URL and optionally enable previews
# CORS_ORIGINS=http://localhost:5173,https://app.nivogroup.se,https://nivo-xxx.vercel.app
# CORS_ALLOW_VERCEL_PREVIEWS=true
# Opt-in: allow any *.vercel.app subdomain (set to true/1/yes when needed)
# CORS_ALLOW_VERCEL_PREVIEWS=false

# ----------------------------------------------------------------------------
# Frontend (Vite) — set in frontend/.env or root .env; for Vercel set in Project → Environment Variables
# ----------------------------------------------------------------------------
# Required for Auth0 login and API calls. See frontend/.env.example for a copy-paste template.
VITE_API_BASE_URL=https://api.nivogroup.se
VITE_AUTH0_DOMAIN=your-tenant.us.auth0.com
VITE_AUTH0_CLIENT_ID=your-spa-client-id
VITE_AUTH0_AUDIENCE=https://api.nivogroup.se
# Local dev only: VITE_API_BASE_URL=http://127.0.0.1:8000
# Optional scraper: VITE_SCRAPER_API_BASE_URL=http://localhost:3000
# VITE_SCRAPER_APP_BASE_URL=http://localhost:3000
